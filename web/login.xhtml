<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<f:view>
    <h:head>
        <!--<h:outputStylesheet library="css" name="style.css"/>-->
    </h:head>
    <h:body>
        <h1> Admin Panel </h1>
        ${adminBacking.init()}
        <p>Logged in as: <h:outputText value="#{loginBacking.loggedInUser.username}"/></p>
        <h:form>
            <div id="userList">
                <table>
                    <tr>
                        <th> Id </th>
                        <th> Username</th>
                        <th> Role</th>
                    </tr>
                    <ui:repeat value="#{adminBacking.users}" var="user">
                        <tr>
                            <td> #{user.id} </td>
                            <td> #{user.username} </td>
                            <td> #{user.role} </td>
                        </tr>
                    </ui:repeat>
                </table>
            </div>
            <div>
                <h2> Delete Twat </h2>
                <label> Twat Id: </label>
                <h:inputText value="${adminBacking.tweetId}"/>
                <h:commandButton value="Delete Tweet" action="${adminBacking.deleteTweet(adminBacking.tweetId)}" />
                <p><h:outputLabel value="#{adminBacking.twatDeleteMessage} "/></p>
            </div>

            <div>
                <h2> Assign role to User </h2>
                <label> Username: </label>
                <h:inputText value="${adminBacking.userRoleName}"/>
                <h:selectOneMenu value="#{adminBacking.role}">
                    <f:selectItem itemValue="REGULAR" itemLabel="Regular"/>
                    <f:selectItem itemValue="MODERATOR" itemLabel="Moderator"/>
                </h:selectOneMenu>
                <h:commandButton value="Assign Role" action="${adminBacking.assignRole(adminBacking.username, adminBacking.role)}"/>
                <p><h:outputLabel value="#{adminBacking.roleAssignMessage}"/></p>
            </div>
        </h:form>
    </h:body>
</f:view>
</html>
